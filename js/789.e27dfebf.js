"use strict";(self["webpackChunkmyshopping"]=self["webpackChunkmyshopping"]||[]).push([[789],{1789:function(t,a,e){e.r(a),e.d(a,{default:function(){return h}});var s=function(){var t=this,a=t._self._c;return a("div",{staticClass:"order"},[a("van-nav-bar",{attrs:{title:"我的订单","left-arrow":""},on:{"click-left":function(a){return t.$router.go(-1)}}}),a("van-tabs",{attrs:{sticky:""},model:{value:t.active,callback:function(a){t.active=a},expression:"active"}},[a("van-tab",{attrs:{name:"all",title:"全部"}}),a("van-tab",{attrs:{name:"payment",title:"待支付"}}),a("van-tab",{attrs:{name:"delivery",title:"待发货"}}),a("van-tab",{attrs:{name:"received",title:"待收货"}}),a("van-tab",{attrs:{name:"comment",title:"待评价"}})],1),t._l(t.orderList,(function(t){return a("OrderListItem",{key:t.order_id,attrs:{item:t}})})),a("div",{staticClass:"footer"},[t.orderList.length>0?a("div",{staticClass:"pagectrl"},[t.nowPage>1?a("button",{staticClass:"btn",on:{click:function(a){return t.changePage(-1)}}},[t._v("上一页")]):t._e(),a("div",{staticClass:"pageNum"},[t._v("当前页:"+t._s(t.nowPage))]),t.nowPage<t.lastPage?a("button",{staticClass:"btn",on:{click:function(a){return t.changePage(1)}}},[t._v("下一页")]):t._e()]):a("div",{staticClass:"empty"},[a("span",[t._v(t._s(t.StateObj[t.active]))])])])],2)},i=[],n=function(){var t=this,a=t._self._c;return a("div",{staticClass:"order-list-item"},[a("div",{staticClass:"tit"},[a("div",{staticClass:"time"},[t._v(t._s(t.item.pay_time))]),a("div",{staticClass:"status"},[a("span",[t._v(t._s(t.item.state_text))])])]),a("div",{staticClass:"list"},t._l(t.item.goods,(function(e){return a("div",{key:e.goods_id,staticClass:"list-item"},[a("div",{staticClass:"goods-img"},[a("img",{attrs:{src:e.goods_image,alt:""}})]),a("div",{staticClass:"goods-content text-ellipsis-2"},[t._v(" "+t._s(e.goods_name)+" ")]),a("div",{staticClass:"goods-trade"},[a("p",[t._v("¥ "+t._s(e.goods_price))]),a("p",[t._v("x "+t._s(e.total_num))])])])})),0),a("div",{staticClass:"total"},[t._v(" 共"+t._s(t.item.goods_total_num)+"件商品，总金额 ¥"+t._s(t.item.total_price)+" ")])])},r=[],o={props:{item:{type:Object}},data(){return{nowState:this.item.state_text}}},l=o,c=e(1001),d=(0,c.Z)(l,n,r,!1,null,"dfcac882",null),v=d.exports,g=e(4471);const _=(t,a)=>g.Z.get("/order/list",{params:{dataType:t,page:a}});var m={name:"OrderPage",data(){return{active:this.$route.query.dataType||"all",orderList:"",nowPage:1,lastPage:-1,total:-1,StateObj:{all:"订单为空，快去逛逛吧",payment:"待支付订单为空，快去逛逛吧",delivery:"待发货订单为空，快去逛逛吧",received:"待收货订单为空，快去逛逛吧",comment:"待评价订单为空，快去逛逛吧"}}},created(){this.getOrderList()},methods:{async getOrderList(){const{data:{list:t}}=await _(this.active,this.nowPage);t.data.forEach((t=>(t.goods_total_num=t.goods.reduce(((t,a)=>t+a.total_num),0),t.goods_total_num))),this.orderList=t.data,this.lastPage=t.last_page},changePage(t){t>0?this.nowPage++:this.nowPage--}},watch:{active:{handler(t){this.getOrderList()}},nowPage:{handler(t){this.getOrderList()}}},components:{OrderListItem:v}},u=m,p=(0,c.Z)(u,s,i,!1,null,"6256bdc6",null),h=p.exports}}]);
//# sourceMappingURL=789.e27dfebf.js.map