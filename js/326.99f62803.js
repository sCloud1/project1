"use strict";(self["webpackChunkmyshopping"]=self["webpackChunkmyshopping"]||[]).push([[326],{5326:function(s,t,a){a.r(t),a.d(t,{default:function(){return v}});var e=function(){var s=this,t=s._self._c;return t("div",{staticClass:"pay"},[t("van-nav-bar",{attrs:{fixed:"",title:"订单结算台","left-arrow":""},on:{"click-left":function(t){return s.$router.go(-1)}}}),t("div",{staticClass:"address"},[t("div",{staticClass:"left-icon"},[t("van-icon",{attrs:{name:"logistics"}})],1),t("div",{staticClass:"info",on:{click:s.goEditAddress}},[t("div",{staticClass:"info-content"},[t("span",{staticClass:"name"},[s._v(s._s(s.defaultAddress.name))]),t("span",{staticClass:"mobile"},[s._v(s._s(s.defaultAddress.phone))])]),t("div",{staticClass:"info-address"},[s._v(" "+s._s(s.defaultAddress.region?.province)+" "+s._s(s.defaultAddress.region?.city)+" "+s._s(s.defaultAddress.region?.region)+" "+s._s(s.defaultAddress.detail)+" ")])]),t("div",{staticClass:"right-icon"},[t("van-icon",{attrs:{name:"arrow"}})],1)]),t("div",{staticClass:"pay-list"},[t("div",{staticClass:"list"},s._l(s.goodsList,(function(a,e){return t("div",{key:e+"a",staticClass:"goods-item"},[t("div",{staticClass:"left"},[t("img",{attrs:{src:a.goods_image,alt:""}})]),t("div",{staticClass:"right"},[t("p",{staticClass:"tit text-ellipsis-2"},[s._v(" "+s._s(a.goods_name)+" ")]),t("p",{staticClass:"info"},[t("span",{staticClass:"count"},[s._v("x"+s._s(a.total_num))]),t("span",{staticClass:"price"},[s._v("¥"+s._s(a.goods_price_min))])])])])})),0),t("div",{staticClass:"flow-num-box"},[t("span",[s._v("共 "+s._s(s.detail.order?.orderTotalNum)+" 件商品，合计：")]),t("span",{staticClass:"money"},[s._v("￥"+s._s(s.detail.order?.orderTotalPrice))])]),t("div",{staticClass:"pay-detail"},[t("div",{staticClass:"pay-cell"},[t("span",[s._v("订单总金额：")]),t("span",{staticClass:"red"},[s._v("￥"+s._s(s.detail.order?.orderTotalPrice))])]),s._m(0),t("div",{staticClass:"pay-cell"},[t("span",[s._v("配送费用：")]),t("span",{staticClass:"red"},[s._v("+￥0.00")])])]),t("div",{staticClass:"pay-way"},[t("span",{staticClass:"tit"},[s._v("支付方式")]),t("div",{staticClass:"pay-cell"},[t("span",[t("van-icon",{attrs:{name:"balance-o"}}),s._v("余额支付（可用 ¥ "+s._s(s.detail.personal?.balance)+" 元）")],1),t("span",{staticClass:"red"},[t("van-icon",{attrs:{name:"passed"}})],1)])]),t("div",{staticClass:"buytips"},[t("textarea",{directives:[{name:"model",rawName:"v-model",value:s.remark,expression:"remark"}],attrs:{placeholder:"选填：买家留言（50字内）",name:"",id:"",cols:"30",rows:"10"},domProps:{value:s.remark},on:{input:function(t){t.target.composing||(s.remark=t.target.value)}}})])]),t("div",{staticClass:"footer-fixed"},[t("div",{staticClass:"left"},[s._v("实付款："),t("span",[s._v("￥"+s._s(s.detail.order?.orderTotalPrice))])]),t("div",{staticClass:"tipsbtn",on:{click:s.submitOrder}},[s._v("提交订单")])])],1)},d=[function(){var s=this,t=s._self._c;return t("div",{staticClass:"pay-cell"},[t("span",[s._v("优惠券：")]),t("span",[s._v("无优惠券可用")])])}],o=(a(8146),a(8848)),r=(a(560),a(4471));const i=({mode:s,remark:t,goodsId:a,goodsNum:e,goodsSkuId:d,cartIds:o})=>r.Z.get("/checkout/order",{params:{mode:s,delivery:10,payType:10,couponId:0,isUsePoints:0,remark:t,goodsId:a,goodsNum:e,goodsSkuId:d,cartIds:o}}),n=({mode:s,remark:t,goodsId:a,goodsNum:e,goodsSkuId:d,cartIds:o})=>r.Z.post("/checkout/submit",{mode:s,delivery:10,payType:10,couponId:0,isUsePoints:0,remark:t,goodsId:a,goodsNum:e,goodsSkuId:d,cartIds:o});var c=a(170),l={name:"PayIndex",data(){return{remark:"",detail:{},goodsList:[],defaultAddress:{}}},created(){this.confirmOrderInfo()},methods:{async confirmOrderInfo(){const s="cart"===this.mode?{mode:this.mode,cartIds:this.cartIds,remark:this.remark}:{mode:this.mode,goodsId:this.goodsId,goodsNum:this.goodsNum,goodsSkuId:this.goodsSkuId,remark:this.remark},t=await i(s),a=t.data;this.detail=a,this.goodsList=a.order.goodsList;const e=await(0,c.fM)(a.personal.address_id);this.defaultAddress=e.data.detail},goEditAddress(){this.$router.push("/address")},async submitOrder(){const s="cart"===this.mode?{mode:this.mode,cartIds:this.cartIds,remark:this.remark}:{mode:this.mode,goodsId:this.goodsId,goodsNum:this.goodsNum,goodsSkuId:this.goodsSkuId,remark:this.remark};await n(s),o.Z.success("提交成功"),setTimeout((()=>{this.$router.replace("/myorder")}),2500)}},computed:{mode(){return this.$route.query.mode},cartIds(){return this.$route.query.cartIds},goodsId(){return this.$route.query.goodsId},goodsNum(){return this.$route.query.goodsNum},goodsSkuId(){return this.$route.query.goodsSkuId}}},u=l,m=a(1001),p=(0,m.Z)(u,e,d,!1,null,"3e82adc0",null),v=p.exports}}]);
//# sourceMappingURL=326.99f62803.js.map